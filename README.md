# Проект «Интернет-магазин косметики»

## Онлайн-магазин, предлагающий широкий ассортимент косметики, средств по уходу за кожей, волосами и парфюмерии. 
**Задача предоставить удобную платформу для выбора косметических продуктов.**

•	Какую проблему решает ваша система?

Автоматизирует процесс покупки товаров в магазине.

•	Какие ключевые функции она предоставляет?

Покупка, продажа, заказ товаров.

•	Какие диаграммы вы выбрали и почему?

UML-диаграммы, так как они легкие в реализации, удобны в использовании и визуально понятны.

•	Как эти диаграммы помогают понять архитектуру вашего приложения?

Быстрая разработка классов и дальнейшая модификация проекта.

# UML-диаграммы
Диаграмма классов — это структурная диаграмма языка моделирования UML, которая демонстрирует общую структуру иерархии классов системы.
![Классы.jpg](https://github.com/niiikkto/OnlineCosmeticStore/blob/main/%D0%9A%D0%BB%D0%B0%D1%81%D1%81%D1%8B.jpg)
 
Диаграмма вариантов использования — помогает лучше понять требования к системе и определить её функциональные возможности
![Вариантов использования.jpg](https://github.com/niiikkto/OnlineCosmeticStore/blob/main/%D0%92%D0%B0%D1%80%D0%B8%D0%B0%D0%BD%D1%82%D0%BE%D0%B2%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.jpg)
 
Диаграмма последовательности — это наглядное представление элементов модели системы
 ![Последовательности.jpg](https://github.com/niiikkto/OnlineCosmeticStore/blob/main/%D0%9F%D0%BE%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8.jpg)

# База Данных

## **1. Таблица `Admins` (Администраторы)**
**Назначение**: Хранение данных администраторов системы с разными уровнями доступа.  
**Поля**:
- `Id` - уникальный идентификатор
- `Name` - ФИО администратора
- `Email` - электронная почта для входа
- `Rights` - уровень прав (управление товарами/заказами/полный доступ)

## **2. Таблица `Sellers` (Продавцы)**
**Назначение**: Информация о компаниях/ИП, поставляющих товары в магазин.  
**Поля**:
- `Id` - уникальный идентификатор
- `Name` - название компании/ФИО ИП
- `NumberPhone` - контактный телефон
- `Email` - электронная почта

**Связи**:
- Один-ко-многим с `Products` (один продавец может предлагать много товаров)

## **3. Таблица `Products` (Товары)**
**Назначение**: Каталог товаров магазина.  
**Поля**:
- `Id` - уникальный идентификатор
- `Name` - название товара
- `Description` - детальное описание
- `Price` - цена (лучше заменить на decimal для точности)
- `Quantity` - количество на складе
- `SellerId` - ссылка на продавца

**Связи**:
- Многие-к-одному с `Sellers` (товар принадлежит одному продавцу)
- Один-ко-многим с `Baskets` (товар может быть в нескольких корзинах)
- Один-ко-многим с `Orders` (товар может быть в нескольких заказах)

## **4. Таблица `PaymentMethods` (Способы оплаты)**
**Назначение**: Справочник доступных способов оплаты.  
**Поля**:
- `Id` - уникальный идентификатор
- `Name` - название способа оплаты

**Связи**:
- Один-ко-многим с `Orders` (один способ оплаты может использоваться в многих заказах)

## **5. Таблица `Baskets` (Корзины)**
**Назначение**: Временное хранение товаров перед оформлением заказа.  
**Поля**:
- `Id` - уникальный идентификатор
- `ProductId` - ссылка на товар

**Связи**:
- Многие-к-одному с `Products` (корзина содержит товар)
- Один-к-одному с `Customers` (у каждого покупателя своя корзина)

## **6. Таблица `Customers` (Покупатели)**
**Назначение**: Информация о зарегистрированных пользователях.  
**Поля**:
- `Id` - уникальный идентификатор
- `BasketId` - ссылка на корзину
- `Name` - ФИО покупателя
- `NumberPhone` - контактный телефон
- `DeliveryAddress` - адрес доставки
- `Email` - электронная почта

**Связи**:
- Один-к-одному с `Baskets` (у каждого покупателя одна корзина)
- Один-ко-многим с `Orders` (покупатель может делать много заказов)

## **7. Таблица `Orders` (Заказы)**
**Назначение**: Фиксация завершенных покупок.  
**Поля**:
- `Id` - уникальный идентификатор
- `CustomerId` - ссылка на покупателя
- `DateOfCreation` - дата создания
- `Quantity` - количество товаров
- `ProductId` - ссылка на товар
- `PaymentMethodId` - способ оплаты
- `Status` - текущий статус (Issued, OnTheWay и т.д.)
- `PriceAll` - итоговая сумма

**Связи**:
- Многие-к-одному с `Customers` (заказ принадлежит одному покупателю)
- Многие-к-одному с `Products` (заказ содержит товар)
- Многие-к-одному с `PaymentMethods` (заказ использует один способ оплаты)

# Реализация “слоя представления” - консоли

## 1. Генерация тестовых данных
- **Метод:** `GenerateTestData(ShopDbContext context)`
- **Назначение:** Полностью очищает и заново наполняет базу данных тестовыми администраторами, продавцами, товарами, покупателями, корзинами, заказами и способами оплаты.

## 2. Консольные меню для ролей
- **Метод:** `ConsoleAdmin()`
  - **Назначение:** Меню для администратора. Позволяет:
    - Просматривать все товары, заказы, продавцов, покупателей
    - Удалять товары, заказы, продавцов, покупателей

- **Метод:** `ConsoleSeller()`
  - **Назначение:** Меню для продавца. Позволяет:
    - Добавлять и убирать товары со склада
    - Просматривать и изменять свои данные и данные своих товаров

- **Метод:** `ConsoleCustomer()`
  - **Назначение:** Меню для покупателя. Позволяет:
    - Добавлять и убирать товары из корзины
    - Просматривать свои данные
    - Оформлять и отменять заказы

## 3. Выбор роли и авторизация
- **Метод:** `ConsoleRights(int role, string name)`
  - **Назначение:** Проверяет роль пользователя (админ, продавец, покупатель) и возвращает соответствующий код доступа.

## 4. Запуск приложения
- **Метод:** `Main()`
  - **Назначение:** Точка входа. Создаёт контекст базы данных, может генерировать тестовые данные, вызывает методы для чтения заказов и (закомментировано) — для выбора роли и вызова соответствующего меню.


# Структура слоя работы с БД

- **Контекст базы данных:** `ShopDbContext`
  - **Назначение:** Предоставляет доступ к таблицам базы данных (администраторы, продавцы, товары, покупатели, корзины, заказы, способы оплаты), храняться в файле db_controler и реалищованны методы: read, add, update, delete.
  - **Методы:**
    - `GenerateTestData(ShopDbContext context)`: Очищает и наполняет базу тестовыми данными.

- **Контроллеры:**
  - **OrderDbControler**
    - **Назначение:** Обеспечивает чтение заказов из базы данных (реализация отсутствует в проекте).
  - **Другие контроллеры (если есть):** Реализуют операции CRUD для соответствующих сущностей.

- **Модели данных:**
  - **Admin:** Хранит данные администраторов.
  - **Seller:** Хранит данные продавцов.
  - **Product:** Хранит данные товаров.
  - **Customer:** Хранит данные покупателей.
  - **Cart:** Хранит данные корзин.
  - **Order:** Хранит данные заказов.
  - **PaymentMethod:** Хранит данные способов оплаты.

- **Логика работы с БД:**
  - **Методы в `Program.cs`:**
    - `ConsoleAdmin()`, `ConsoleSeller()`, `ConsoleCustomer()`: Реализуют бизнес-логику для разных ролей, взаимодействуя с БД через контекст.
    - `ConsoleRights(int role, string name)`: Проверяет роль пользователя и возвращает код доступа.
    - `Main()`: Точка входа, создаёт контекст БД и вызывает необходимые методы. 

# Основные классы и их функционал

## 1. Класс `Admin`
- **Назначение:** Представление администратора системы
- **Функционал:**
  - Хранение данных администратора (Id, Name, Email, Rights)
  - Управление правами доступа
  - Аутентификация администратора

## 2. Класс `Seller`
- **Назначение:** Представление продавца/поставщика
- **Функционал:**
  - Хранение информации о продавце (Id, Name, NumberPhone, Email)
  - Управление товарами продавца
  - Взаимодействие с администраторами

## 3. Класс `Product`
- **Назначение:** Представление товара в магазине
- **Функционал:**
  - Хранение информации о товаре (Id, Name, Description, Price, Quantity)
  - Управление остатками товара
  - Связь с продавцом и заказами

## 4. Класс `Customer`
- **Назначение:** Представление покупателя
- **Функционал:**
  - Хранение данных покупателя (Id, Name, NumberPhone, DeliveryAddress, Email)
  - Управление корзиной покупок
  - История заказов

## 5. Класс `Basket`
- **Назначение:** Управление корзиной покупок
- **Функционал:**
  - Хранение выбранных товаров
  - Управление количеством товаров
  - Расчет общей стоимости

## 6. Класс `Order`
- **Назначение:** Управление заказами
- **Функционал:**
  - Создание и управление заказами
  - Отслеживание статуса заказа
  - Расчет итоговой стоимости
  - Управление способом оплаты

## 7. Класс `PaymentMethod`
- **Назначение:** Управление способами оплаты
- **Функционал:**
  - Хранение информации о доступных способах оплаты
  - Связь с заказами
  - Валидация способов оплаты

# Бизнес-логика приложения

## Основные бизнес-процессы

### 1. Управление товарами
- Добавление новых товаров в каталог
- Обновление информации о товарах
- Управление остатками на складе
- Категоризация товаров
- Установка цен и скидок

### 2. Процесс покупки
- Поиск товаров в каталоге
- Добавление товаров в корзину
- Управление количеством товаров
- Расчет итоговой стоимости
- Выбор способа оплаты
- Оформление заказа

### 3. Управление заказами
- Создание новых заказов
- Отслеживание статуса заказа
- Обработка отмен заказов
- Управление доставкой
- Формирование отчетов

### 4. Администрирование
- Управление пользователями
- Контроль продавцов
- Модерация товаров
- Аналитика продаж
- Управление правами доступа

## Взаимодействие компонентов

### 1. Слой представления (UI)
- Консольный интерфейс для разных ролей
- Валидация пользовательского ввода
- Отображение информации
- Обработка команд пользователя

### 2. Бизнес-слой
- Реализация бизнес-правил
- Обработка бизнес-логики
- Валидация данных
- Управление транзакциями

### 3. Слой доступа к данным
- Взаимодействие с базой данных
- CRUD операции
- Управление соединениями
- Кэширование данных

# Детальное описание классов

## 1. Класс `Admin`
- **Назначение:** Управление системой и пользователями
- **Основные методы:**
  - `ManageUsers()` - управление пользователями
  - `ManageProducts()` - управление товарами
  - `ViewReports()` - просмотр отчетов
  - `SetRights()` - установка прав доступа
- **Свойства:**
  - `Id` - уникальный идентификатор
  - `Name` - ФИО администратора
  - `Email` - электронная почта
  - `Rights` - уровень прав доступа

## 2. Класс `Seller`
- **Назначение:** Управление товарами и продажами
- **Основные методы:**
  - `AddProduct()` - добавление товара
  - `UpdateProduct()` - обновление информации о товаре
  - `ManageStock()` - управление остатками
  - `ViewSales()` - просмотр продаж
- **Свойства:**
  - `Id` - уникальный идентификатор
  - `Name` - название компании/ФИО
  - `NumberPhone` - контактный телефон
  - `Email` - электронная почта

## 3. Класс `Product`
- **Назначение:** Представление товара в системе
- **Основные методы:**
  - `UpdateStock()` - обновление количества
  - `CalculatePrice()` - расчет цены
  - `CheckAvailability()` - проверка наличия
- **Свойства:**
  - `Id` - уникальный идентификатор
  - `Name` - название товара
  - `Description` - описание
  - `Price` - цена
  - `Quantity` - количество
  - `SellerId` - ID продавца

## 4. Класс `Customer`
- **Назначение:** Управление данными покупателя
- **Основные методы:**
  - `PlaceOrder()` - оформление заказа
  - `ViewHistory()` - просмотр истории заказов
  - `UpdateProfile()` - обновление профиля
- **Свойства:**
  - `Id` - уникальный идентификатор
  - `Name` - ФИО
  - `NumberPhone` - телефон
  - `DeliveryAddress` - адрес доставки
  - `Email` - электронная почта

## 5. Класс `Basket`
- **Назначение:** Управление корзиной покупок
- **Основные методы:**
  - `AddItem()` - добавление товара
  - `RemoveItem()` - удаление товара
  - `UpdateQuantity()` - изменение количества
  - `CalculateTotal()` - расчет суммы
- **Свойства:**
  - `Id` - уникальный идентификатор
  - `Items` - список товаров
  - `TotalAmount` - общая сумма

## 6. Класс `Order`
- **Назначение:** Управление заказами
- **Основные методы:**
  - `Create()` - создание заказа
  - `UpdateStatus()` - обновление статуса
  - `Cancel()` - отмена заказа
  - `CalculateTotal()` - расчет итоговой суммы
- **Свойства:**
  - `Id` - уникальный идентификатор
  - `CustomerId` - ID покупателя
  - `DateOfCreation` - дата создания
  - `Status` - статус заказа
  - `TotalAmount` - итоговая сумма

## 7. Класс `PaymentMethod`
- **Назначение:** Управление способами оплаты
- **Основные методы:**
  - `Validate()` - проверка валидности
  - `ProcessPayment()` - обработка платежа
- **Свойства:**
  - `Id` - уникальный идентификатор
  - `Name` - название способа оплаты
  - `IsActive` - активен ли способ оплаты
